<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
        <link rel="stylesheet" href="css/style.css">
        <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    </head>
    <body onload="initialize()">
        <!-- content gaat vanaf hier --> 
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
            <!-- START-COMP: L-Linkbar -->
            <header id="mainHeader" class="mdl-layout__header">
                <div class="mdl-layout__header-row">
                    <nav class="mdl-navigation mdl-layout--large-screen-only">
                        <div class="mdl-layout-spacer"></div>
                        <a class="mdl-navigation__link menuText" href="index.html">Home</a>
                        <a class="mdl-navigation__link menuText" href="map+add marker.html">Route</a>
                        <a class="mdl-navigation__link menuText" href="stadfiets.html">Beacons</a>
                        <a class="mdl-navigation__link menuText" href="transportfiets.html">Profile</a>
                        <div class="mdl-layout-spacer"></div>
                    </nav>
                    <div class="mdl-layout-spacer"></div>
                    <nav class="mdl-navigation mdl-layout--large-screen-only">
                        <a class="mdl-navigation__link" href="#"></a>
                        <a class="mdl-navigation__link" href="#"></a>
                    </nav>

                </div>
            </header>

            <!--  small screens get a drawer thing -->
            <div class="mdl-layout__drawer mdl-layout--small-screen-only">
                <nav class="mdl-navigation">
                    <a class="mdl-navigation__link menuText" href="index.html">Home</a>
                    <a class="mdl-navigation__link menuText" href="map+add marker.html">Route</a>
                    <a class="mdl-navigation__link menuText" href="stadfiets.html">Beacons</a>
                    <a class="mdl-navigation__link menuText" href="transportfiets.html">Profile</a>
                </nav>
            </div>
            <div id="map"></div>


            <script>
                var marker;



                var locations = [
                    ['Wibautstraat 4', 52.360014, 4.908756],
                    ['Wibautstraat 8', 52.359419, 4.909093],
                    ['Wibautstraat 3', 52.358628, 4.909593],
                    ['Wibautstraat 7', 52.358815, 4.910468],
                    ['Wibautstraat 13', 52.358077, 4.909910]
                ];

                function initialize() {
                    var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 16,
                        center: new google.maps.LatLng(52.35840924, 4.9096334),
                        //mapTypeId: 'terrain',
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        gestureHandling: 'cooperative',
                        streetViewControl: false
                    });

                    setHardcodedMarkers(map, locations);

                    google.maps.event.addListener(map, 'click', function (event) {
                        placeMarker(event.latLng);
                    });

                    function placeMarker(location) {
                        var marker = new google.maps.Marker({
                            position: location,
                            map: map
                        });
                        marker.setMap(map);
                    }





                    // 
//                    infowindow = new google.maps.InfoWindow({
//                        content: document.getElementById('form')
//                    });
//
//                    google.maps.event.addListener(map, 'click', function (event) {
//                        marker = new google.maps.Marker({
//                            position: event.latLng,
//                            map: map
//                        });

//                        google.maps.event.addListener(marker, 'click', function () {
//
//                            infowindow.open(map, marker);
//                        });
//                    });
                }

                function setHardcodedMarkers(map, locations) {
                    var marker, i;

                    for (i = 0; i < locations.length; i++) {
                        var name = locations[i][0];
                        var lat = locations[i][1];
                        var long = locations [i][2];

                        latlngset = new google.maps.LatLng(lat, long);

                        var marker = new google.maps.Marker({
                            map: map,
                            title: name,
                            position: latlngset
                        });
                        var infowindowContent = "<h5>" + name + " </h5>Latitude: " + lat + " <br>Longitude: " + long;

                        //  var client = new HttpClient();
                        //  client.get('http://it95.nl:8080/EyeBeacon-1.0/api/beacons', function (response) {
                        //      infowindowContent = response;
                        //  });

                        map.setCenter(marker.getPosition());


                        var infowindow = new google.maps.InfoWindow();

                        google.maps.event.addListener(marker, 'click', (function (marker, infowindowContent, infowindow) {
                            return function () {
                                infowindow.setContent(infowindowContent);
                                infowindow.open(map, marker);

                            };
                        })(marker, infowindowContent, infowindow));


                    }
                }





            </script>

            <script async defer 
                    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdY-kyv5IseWrut2MfMYIjKVvGAm37ZWc">
            </script>
        </div>
    </body>
</html>
